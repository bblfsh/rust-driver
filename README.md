# rust-driver [![Build Status](https://travis-ci.org/bblfsh/rust-driver.svg?branch=master)](https://travis-ci.org/bblfsh/rust-driver)

Rust driver for [babelfish](https://github.com/src-d/babelfish).

### Example input program

```rust
#[derive(Debug,Copy,Clone)]
pub struct Person {
        pub name: String,
        pub gender: Gender,
        pub age: i32,
        pub spouse: Option<Person>
}

#[derive(Debug,Copy,Clone)]
pub enum Gender {
        Male,
        Female,
        Other(String)
}

impl Person {
        pub fn new(name: String, gender: Gender, age: i32, spouse: Option<Person>) -> Person {
                Person{
                        name: name,
                        gender: gender,
                        age: age,
                        spouse: spouse,
                }
        }
}
```

### Example output

```json
{
  "ast":{
    "module":{
      "inner":{
        "lo":1,
        "hi":576
      },
      "items":[
        {
          "ident":"Person",
          "attrs":[
            {
              "id":{
                "_field0":0
              },
              "style":"Outer",
              "value":{
                "name":"derive",
                "node":{
                  "variant":"List",
                  "fields":[
                    [
                      {
                        "node":{
                          "variant":"MetaItem",
                          "fields":[
                            {
                              "name":"Debug",
                              "node":"Word",
                              "span":{
                                "lo":10,
                                "hi":15
                              }
                            }
                          ]
                        },
                        "span":{
                          "lo":10,
                          "hi":15
                        }
                      },
                      {
                        "node":{
                          "variant":"MetaItem",
                          "fields":[
                            {
                              "name":"Copy",
                              "node":"Word",
                              "span":{
                                "lo":16,
                                "hi":20
                              }
                            }
                          ]
                        },
                        "span":{
                          "lo":16,
                          "hi":20
                        }
                      },
                      {
                        "node":{
                          "variant":"MetaItem",
                          "fields":[
                            {
                              "name":"Clone",
                              "node":"Word",
                              "span":{
                                "lo":21,
                                "hi":26
                              }
                            }
                          ]
                        },
                        "span":{
                          "lo":21,
                          "hi":26
                        }
                      }
                    ]
                  ]
                },
                "span":{
                  "lo":3,
                  "hi":27
                }
              },
              "is_sugared_doc":false,
              "span":{
                "lo":1,
                "hi":28
              }
            }
          ],
          "id":4294967295,
          "node":{
            "variant":"Struct",
            "fields":[
              {
                "variant":"Struct",
                "fields":[
                  [
                    {
                      "span":{
                        "lo":57,
                        "hi":73
                      },
                      "ident":"name",
                      "vis":"Public",
                      "id":4294967295,
                      "ty":{
                        "id":4294967295,
                        "node":{
                          "variant":"Path",
                          "fields":[
                            null,
                            {
                              "span":{
                                "lo":67,
                                "hi":73
                              },
                              "segments":[
                                {
                                  "identifier":"String",
                                  "parameters":null
                                }
                              ]
                            }
                          ]
                        },
                        "span":{
                          "lo":67,
                          "hi":73
                        }
                      },
                      "attrs":[

                      ]
                    },
                    {
                      "span":{
                        "lo":83,
                        "hi":101
                      },
                      "ident":"gender",
                      "vis":"Public",
                      "id":4294967295,
                      "ty":{
                        "id":4294967295,
                        "node":{
                          "variant":"Path",
                          "fields":[
                            null,
                            {
                              "span":{
                                "lo":95,
                                "hi":101
                              },
                              "segments":[
                                {
                                  "identifier":"Gender",
                                  "parameters":null
                                }
                              ]
                            }
                          ]
                        },
                        "span":{
                          "lo":95,
                          "hi":101
                        }
                      },
                      "attrs":[

                      ]
                    },
                    {
                      "span":{
                        "lo":111,
                        "hi":123
                      },
                      "ident":"age",
                      "vis":"Public",
                      "id":4294967295,
                      "ty":{
                        "id":4294967295,
                        "node":{
                          "variant":"Path",
                          "fields":[
                            null,
                            {
                              "span":{
                                "lo":120,
                                "hi":123
                              },
                              "segments":[
                                {
                                  "identifier":"i32",
                                  "parameters":null
                                }
                              ]
                            }
                          ]
                        },
                        "span":{
                          "lo":120,
                          "hi":123
                        }
                      },
                      "attrs":[

                      ]
                    },
                    {
                      "span":{
                        "lo":133,
                        "hi":159
                      },
                      "ident":"spouse",
                      "vis":"Public",
                      "id":4294967295,
                      "ty":{
                        "id":4294967295,
                        "node":{
                          "variant":"Path",
                          "fields":[
                            null,
                            {
                              "span":{
                                "lo":145,
                                "hi":159
                              },
                              "segments":[
                                {
                                  "identifier":"Option",
                                  "parameters":{
                                    "variant":"AngleBracketed",
                                    "fields":[
                                      {
                                        "lifetimes":[

                                        ],
                                        "types":[
                                          {
                                            "id":4294967295,
                                            "node":{
                                              "variant":"Path",
                                              "fields":[
                                                null,
                                                {
                                                  "span":{
                                                    "lo":152,
                                                    "hi":158
                                                  },
                                                  "segments":[
                                                    {
                                                      "identifier":"Person",
                                                      "parameters":null
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            "span":{
                                              "lo":152,
                                              "hi":158
                                            }
                                          }
                                        ],
                                        "bindings":[

                                        ]
                                      }
                                    ]
                                  }
                                }
                              ]
                            }
                          ]
                        },
                        "span":{
                          "lo":145,
                          "hi":159
                        }
                      },
                      "attrs":[

                      ]
                    }
                  ],
                  4294967295
                ]
              },
              {
                "lifetimes":[

                ],
                "ty_params":[

                ],
                "where_clause":{
                  "id":4294967295,
                  "predicates":[

                  ]
                },
                "span":{
                  "lo":0,
                  "hi":0
                }
              }
            ]
          },
          "vis":"Public",
          "span":{
            "lo":29,
            "hi":161
          }
        },
        {
          "ident":"Gender",
          "attrs":[
            {
              "id":{
                "_field0":1
              },
              "style":"Outer",
              "value":{
                "name":"derive",
                "node":{
                  "variant":"List",
                  "fields":[
                    [
                      {
                        "node":{
                          "variant":"MetaItem",
                          "fields":[
                            {
                              "name":"Debug",
                              "node":"Word",
                              "span":{
                                "lo":172,
                                "hi":177
                              }
                            }
                          ]
                        },
                        "span":{
                          "lo":172,
                          "hi":177
                        }
                      },
                      {
                        "node":{
                          "variant":"MetaItem",
                          "fields":[
                            {
                              "name":"Copy",
                              "node":"Word",
                              "span":{
                                "lo":178,
                                "hi":182
                              }
                            }
                          ]
                        },
                        "span":{
                          "lo":178,
                          "hi":182
                        }
                      },
                      {
                        "node":{
                          "variant":"MetaItem",
                          "fields":[
                            {
                              "name":"Clone",
                              "node":"Word",
                              "span":{
                                "lo":183,
                                "hi":188
                              }
                            }
                          ]
                        },
                        "span":{
                          "lo":183,
                          "hi":188
                        }
                      }
                    ]
                  ]
                },
                "span":{
                  "lo":165,
                  "hi":189
                }
              },
              "is_sugared_doc":false,
              "span":{
                "lo":163,
                "hi":190
              }
            }
          ],
          "id":4294967295,
          "node":{
            "variant":"Enum",
            "fields":[
              {
                "variants":[
                  {
                    "node":{
                      "name":"Male",
                      "attrs":[

                      ],
                      "data":{
                        "variant":"Unit",
                        "fields":[
                          4294967295
                        ]
                      },
                      "disr_expr":null
                    },
                    "span":{
                      "lo":217,
                      "hi":221
                    }
                  },
                  {
                    "node":{
                      "name":"Female",
                      "attrs":[

                      ],
                      "data":{
                        "variant":"Unit",
                        "fields":[
                          4294967295
                        ]
                      },
                      "disr_expr":null
                    },
                    "span":{
                      "lo":231,
                      "hi":237
                    }
                  },
                  {
                    "node":{
                      "name":"Other",
                      "attrs":[

                      ],
                      "data":{
                        "variant":"Tuple",
                        "fields":[
                          [
                            {
                              "span":{
                                "lo":253,
                                "hi":260
                              },
                              "ident":null,
                              "vis":"Inherited",
                              "id":4294967295,
                              "ty":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Path",
                                  "fields":[
                                    null,
                                    {
                                      "span":{
                                        "lo":253,
                                        "hi":259
                                      },
                                      "segments":[
                                        {
                                          "identifier":"String",
                                          "parameters":null
                                        }
                                      ]
                                    }
                                  ]
                                },
                                "span":{
                                  "lo":253,
                                  "hi":259
                                }
                              },
                              "attrs":[

                              ]
                            }
                          ],
                          4294967295
                        ]
                      },
                      "disr_expr":null
                    },
                    "span":{
                      "lo":247,
                      "hi":260
                    }
                  }
                ]
              },
              {
                "lifetimes":[

                ],
                "ty_params":[

                ],
                "where_clause":{
                  "id":4294967295,
                  "predicates":[

                  ]
                },
                "span":{
                  "lo":0,
                  "hi":0
                }
              }
            ]
          },
          "vis":"Public",
          "span":{
            "lo":191,
            "hi":262
          }
        },
        {
          "ident":"",
          "attrs":[

          ],
          "id":4294967295,
          "node":{
            "variant":"Impl",
            "fields":[
              "Normal",
              "Positive",
              {
                "lifetimes":[

                ],
                "ty_params":[

                ],
                "where_clause":{
                  "id":4294967295,
                  "predicates":[

                  ]
                },
                "span":{
                  "lo":0,
                  "hi":0
                }
              },
              null,
              {
                "id":4294967295,
                "node":{
                  "variant":"Path",
                  "fields":[
                    null,
                    {
                      "span":{
                        "lo":269,
                        "hi":275
                      },
                      "segments":[
                        {
                          "identifier":"Person",
                          "parameters":null
                        }
                      ]
                    }
                  ]
                },
                "span":{
                  "lo":269,
                  "hi":275
                }
              },
              [
                {
                  "id":4294967295,
                  "ident":"new",
                  "vis":"Public",
                  "defaultness":"Final",
                  "attrs":[

                  ],
                  "node":{
                    "variant":"Method",
                    "fields":[
                      {
                        "unsafety":"Normal",
                        "constness":{
                          "node":"NotConst",
                          "span":{
                            "lo":286,
                            "hi":289
                          }
                        },
                        "abi":"Rust",
                        "decl":{
                          "inputs":[
                            {
                              "ty":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Path",
                                  "fields":[
                                    null,
                                    {
                                      "span":{
                                        "lo":303,
                                        "hi":309
                                      },
                                      "segments":[
                                        {
                                          "identifier":"String",
                                          "parameters":null
                                        }
                                      ]
                                    }
                                  ]
                                },
                                "span":{
                                  "lo":303,
                                  "hi":309
                                }
                              },
                              "pat":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Ident",
                                  "fields":[
                                    {
                                      "variant":"ByValue",
                                      "fields":[
                                        "Immutable"
                                      ]
                                    },
                                    {
                                      "node":"name",
                                      "span":{
                                        "lo":297,
                                        "hi":301
                                      }
                                    },
                                    null
                                  ]
                                },
                                "span":{
                                  "lo":297,
                                  "hi":301
                                }
                              },
                              "id":4294967295
                            },
                            {
                              "ty":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Path",
                                  "fields":[
                                    null,
                                    {
                                      "span":{
                                        "lo":319,
                                        "hi":325
                                      },
                                      "segments":[
                                        {
                                          "identifier":"Gender",
                                          "parameters":null
                                        }
                                      ]
                                    }
                                  ]
                                },
                                "span":{
                                  "lo":319,
                                  "hi":325
                                }
                              },
                              "pat":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Ident",
                                  "fields":[
                                    {
                                      "variant":"ByValue",
                                      "fields":[
                                        "Immutable"
                                      ]
                                    },
                                    {
                                      "node":"gender",
                                      "span":{
                                        "lo":311,
                                        "hi":317
                                      }
                                    },
                                    null
                                  ]
                                },
                                "span":{
                                  "lo":311,
                                  "hi":317
                                }
                              },
                              "id":4294967295
                            },
                            {
                              "ty":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Path",
                                  "fields":[
                                    null,
                                    {
                                      "span":{
                                        "lo":332,
                                        "hi":335
                                      },
                                      "segments":[
                                        {
                                          "identifier":"i32",
                                          "parameters":null
                                        }
                                      ]
                                    }
                                  ]
                                },
                                "span":{
                                  "lo":332,
                                  "hi":335
                                }
                              },
                              "pat":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Ident",
                                  "fields":[
                                    {
                                      "variant":"ByValue",
                                      "fields":[
                                        "Immutable"
                                      ]
                                    },
                                    {
                                      "node":"age",
                                      "span":{
                                        "lo":327,
                                        "hi":330
                                      }
                                    },
                                    null
                                  ]
                                },
                                "span":{
                                  "lo":327,
                                  "hi":330
                                }
                              },
                              "id":4294967295
                            },
                            {
                              "ty":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Path",
                                  "fields":[
                                    null,
                                    {
                                      "span":{
                                        "lo":345,
                                        "hi":359
                                      },
                                      "segments":[
                                        {
                                          "identifier":"Option",
                                          "parameters":{
                                            "variant":"AngleBracketed",
                                            "fields":[
                                              {
                                                "lifetimes":[

                                                ],
                                                "types":[
                                                  {
                                                    "id":4294967295,
                                                    "node":{
                                                      "variant":"Path",
                                                      "fields":[
                                                        null,
                                                        {
                                                          "span":{
                                                            "lo":352,
                                                            "hi":358
                                                          },
                                                          "segments":[
                                                            {
                                                              "identifier":"Person",
                                                              "parameters":null
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    "span":{
                                                      "lo":352,
                                                      "hi":358
                                                    }
                                                  }
                                                ],
                                                "bindings":[

                                                ]
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  ]
                                },
                                "span":{
                                  "lo":345,
                                  "hi":359
                                }
                              },
                              "pat":{
                                "id":4294967295,
                                "node":{
                                  "variant":"Ident",
                                  "fields":[
                                    {
                                      "variant":"ByValue",
                                      "fields":[
                                        "Immutable"
                                      ]
                                    },
                                    {
                                      "node":"spouse",
                                      "span":{
                                        "lo":337,
                                        "hi":343
                                      }
                                    },
                                    null
                                  ]
                                },
                                "span":{
                                  "lo":337,
                                  "hi":343
                                }
                              },
                              "id":4294967295
                            }
                          ],
                          "output":{
                            "variant":"Ty",
                            "fields":[
                              {
                                "id":4294967295,
                                "node":{
                                  "variant":"Path",
                                  "fields":[
                                    null,
                                    {
                                      "span":{
                                        "lo":364,
                                        "hi":370
                                      },
                                      "segments":[
                                        {
                                          "identifier":"Person",
                                          "parameters":null
                                        }
                                      ]
                                    }
                                  ]
                                },
                                "span":{
                                  "lo":364,
                                  "hi":370
                                }
                              }
                            ]
                          },
                          "variadic":false
                        },
                        "generics":{
                          "lifetimes":[

                          ],
                          "ty_params":[

                          ],
                          "where_clause":{
                            "id":4294967295,
                            "predicates":[

                            ]
                          },
                          "span":{
                            "lo":0,
                            "hi":0
                          }
                        }
                      },
                      {
                        "stmts":[
                          {
                            "id":4294967295,
                            "node":{
                              "variant":"Expr",
                              "fields":[
                                {
                                  "id":4294967295,
                                  "node":{
                                    "variant":"Struct",
                                    "fields":[
                                      {
                                        "span":{
                                          "lo":389,
                                          "hi":395
                                        },
                                        "segments":[
                                          {
                                            "identifier":"Person",
                                            "parameters":null
                                          }
                                        ]
                                      },
                                      [
                                        {
                                          "ident":{
                                            "node":"name",
                                            "span":{
                                              "lo":421,
                                              "hi":426
                                            }
                                          },
                                          "expr":{
                                            "id":4294967295,
                                            "node":{
                                              "variant":"Path",
                                              "fields":[
                                                null,
                                                {
                                                  "span":{
                                                    "lo":427,
                                                    "hi":431
                                                  },
                                                  "segments":[
                                                    {
                                                      "identifier":"name",
                                                      "parameters":null
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            "span":{
                                              "lo":427,
                                              "hi":431
                                            },
                                            "attrs":{
                                              "_field0":null
                                            }
                                          },
                                          "span":{
                                            "lo":421,
                                            "hi":431
                                          },
                                          "is_shorthand":false,
                                          "attrs":{
                                            "_field0":null
                                          }
                                        },
                                        {
                                          "ident":{
                                            "node":"gender",
                                            "span":{
                                              "lo":457,
                                              "hi":464
                                            }
                                          },
                                          "expr":{
                                            "id":4294967295,
                                            "node":{
                                              "variant":"Path",
                                              "fields":[
                                                null,
                                                {
                                                  "span":{
                                                    "lo":465,
                                                    "hi":471
                                                  },
                                                  "segments":[
                                                    {
                                                      "identifier":"gender",
                                                      "parameters":null
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            "span":{
                                              "lo":465,
                                              "hi":471
                                            },
                                            "attrs":{
                                              "_field0":null
                                            }
                                          },
                                          "span":{
                                            "lo":457,
                                            "hi":471
                                          },
                                          "is_shorthand":false,
                                          "attrs":{
                                            "_field0":null
                                          }
                                        },
                                        {
                                          "ident":{
                                            "node":"age",
                                            "span":{
                                              "lo":497,
                                              "hi":501
                                            }
                                          },
                                          "expr":{
                                            "id":4294967295,
                                            "node":{
                                              "variant":"Path",
                                              "fields":[
                                                null,
                                                {
                                                  "span":{
                                                    "lo":502,
                                                    "hi":505
                                                  },
                                                  "segments":[
                                                    {
                                                      "identifier":"age",
                                                      "parameters":null
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            "span":{
                                              "lo":502,
                                              "hi":505
                                            },
                                            "attrs":{
                                              "_field0":null
                                            }
                                          },
                                          "span":{
                                            "lo":497,
                                            "hi":505
                                          },
                                          "is_shorthand":false,
                                          "attrs":{
                                            "_field0":null
                                          }
                                        },
                                        {
                                          "ident":{
                                            "node":"spouse",
                                            "span":{
                                              "lo":531,
                                              "hi":538
                                            }
                                          },
                                          "expr":{
                                            "id":4294967295,
                                            "node":{
                                              "variant":"Path",
                                              "fields":[
                                                null,
                                                {
                                                  "span":{
                                                    "lo":539,
                                                    "hi":545
                                                  },
                                                  "segments":[
                                                    {
                                                      "identifier":"spouse",
                                                      "parameters":null
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            "span":{
                                              "lo":539,
                                              "hi":545
                                            },
                                            "attrs":{
                                              "_field0":null
                                            }
                                          },
                                          "span":{
                                            "lo":531,
                                            "hi":545
                                          },
                                          "is_shorthand":false,
                                          "attrs":{
                                            "_field0":null
                                          }
                                        }
                                      ],
                                      null
                                    ]
                                  },
                                  "span":{
                                    "lo":389,
                                    "hi":564
                                  },
                                  "attrs":{
                                    "_field0":null
                                  }
                                }
                              ]
                            },
                            "span":{
                              "lo":389,
                              "hi":564
                            }
                          }
                        ],
                        "id":4294967295,
                        "rules":"Default",
                        "span":{
                          "lo":371,
                          "hi":574
                        }
                      }
                    ]
                  },
                  "span":{
                    "lo":286,
                    "hi":574
                  }
                }
              ]
            ]
          },
          "vis":"Inherited",
          "span":{
            "lo":264,
            "hi":576
          }
        }
      ]
    },
    "attrs":[

    ],
    "span":{
      "lo":1,
      "hi":575
    },
    "exported_macros":[

    ]
  },
  "status":"ok",
  "errors":[

  ],
  "language":"Rust",
  "language_version":"1.0",
  "driver":"parser-rust:1.0"
}
```
